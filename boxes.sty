\ProvidesPackage{boxes}

\mdfdefinestyle{leftmargin}{
	linecolor=\accentcolour, linewidth=3pt, 
	topline=false, bottomline=false, rightline=false, 
	innertopmargin=3pt, innerbottommargin=3pt, innerrightmargin=0pt
	}
\mdfdefinestyle{rightmargin}{
	linecolor=\accentcolour, linewidth=3pt, 
	topline=false, bottomline=false, leftline=false, 
	backgroundcolor=\lightcolour, 
	innertopmargin=\textsize, innerbottommargin=\textsize
	}

\newtheoremstyle%
	{customtheoremstyle}%
	{0}{0}{\normalfont}{}
	{\color{\accentcolour}\bfseries\sffamily}
	{}{\textsize}{\thmname{#1}\thmnumber{ #2}\thmnote{ #3 \ifx\relax#3\relax\else\newline\fi}
	}
\theoremstyle{customtheoremstyle}

\def\theoremname{Theorem}
\newtheorem{mytheorem}{\theoremname}[section]
	\newenvironment{theorem}%
	{\begin{mdframed}[style=leftmargin]%
		\begin{mytheorem}}
	{\end{mytheorem}\end{mdframed}}

\def\definitionname{Definition}
\newtheorem{mydefinition}[mytheorem]{\definitionname}
	\newenvironment{definition}%
	{\begin{mdframed}[style=leftmargin]%
		\begin{mydefinition}}
	{\end{mydefinition}\end{mdframed}}

\def\lemmaname{Lemma}
\newtheorem{mylemma}[mytheorem]{\lemmaname}
	\newenvironment{lemma}%
	{\begin{mdframed}[style=leftmargin]
		\begin{mylemma}}
	{\end{mylemma}\end{mdframed}}

\def\corollaryname{Corollary}
\newtheorem{mycorollary}{\corollaryname}[mytheorem]
	\newenvironment{corollary}%
	{\begin{mdframed}[style=leftmargin]
		\begin{mycorollary}}
	{\end{mycorollary}\end{mdframed}}

\def\remarkname{Remark}
\newtheorem{myremark}[mytheorem]{\remarkname}
	\newenvironment{remark}%
	{\begin{mdframed}[style=leftmargin]%
		\begin{myremark}}
	{\end{myremark}\end{mdframed}}

\def\examplename{Example}
\newtheorem{myexample}{\examplename}[section]
	\newenvironment{example}%
	{\begin{mdframed}[style=rightmargin]
		\begin{myexample}}
	{\end{myexample}\end{mdframed}}

\def\exercisename{Exercise}
\newtheorem{myexercise}[myexample]{\exercisename}
	\newenvironment{exercise}%
	{\begin{mdframed}[style=rightmargin]
		\begin{myexercise}}
	{\end{myexercise}\end{mdframed}}
	
%% Code displayment
\RequirePackage{listings}
\lstdefinestyle{myMatlabStyle}{
	%backgroundcolor=\color{backcolour},   
	commentstyle = \color{\secondarycolour},
	keywordstyle = \color{\accentcolour},
	numberstyle  = \ttfamily\color{gray},
	stringstyle  = \color{mypurple},
	basicstyle   = \ttfamily\small,
	breakatwhitespace = false,	     
	breaklines = true,	    	     
	captionpos = b,	    	    	
	keepspaces = true,	    	     
	numbers = left,	    	    	
	numbersep = 5pt,	    	      
	showspaces = false,	    	    
	showstringspaces = false,
	showtabs = false,	    	      
	tabsize = 4,
	language = Matlab,
	morekeywords = {on, off},
	deletekeywords={
		length, reshape, zeros, size, linspace, meshgrid, num2str, 
		log, abs, exp, sqrt, pi, 
		sin, asin, cos, acos, tan, atan, 
		max, min, mean, sum, 
		plot, surf, xlabel, ylabel, zlabel, hold,
		gray, 
		all, clear, load
	},
	morestring=*[d]{"},
	morecomment=[l][\textbf]{\%\%}
}
\lstset{style=myMatlabStyle}

% Custom commands
\newcommand{\customcode}[1]{
	\begin{mdframed}[
		innertopmargin=0pt, innerbottommargin=0pt, 
		linewidth=3pt, 
		topline=false, bottomline=false, leftline=false, 
		backgroundcolor=lightgray, linecolor=gray
		]
		\setstretch{1}\lstinputlisting[xleftmargin=\parindent]{#1}
	\end{mdframed}
	}
\newenvironment{block_coloured}[1][]%
{\begin{mdframed}[style=rightmargin, innertopmargin=\textsize]
	\IfEqCase{#1}{
		{}{}%
	}[{{\sffamily\bfseries\color{\accentcolour}{#1}}}]}%
{\end{mdframed}}