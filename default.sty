\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{default}[2023/12/15]

%% Document information
\input{documentinformation.def}


%% Geometry
\RequirePackage{geometry, setspace, titlesec}
\def\linestretch{1.4}
\setstretch{\linestretch}
\renewcommand{\arraystretch}{1}
\newlength{\textsize}
\setlength{\textsize}{\f@size pt}
\newlength{\@parindent}
\setlength{\@parindent}{2\textsize}
\setlength{\parindent}{2\textsize}
\newlength{\@marginwidth}
\setlength{\@marginwidth}{2cm}
\if@document@margin
	\geometry{
		left=\@marginwidth, right=\@marginwidth, 
		bottom=\@marginwidth, top=\@marginwidth, 
		marginparwidth=2.5cm, marginparsep=0.5cm, includemp
	}
	\RequirePackage{marginnote, todonotes}
	\newcommand{\margin}[1]{%
		\todo[size=\footnotesize, noline, color=white, backgroundcolor=white, bordercolor=white]{\sffamily #1}%
	}
\else
	\geometry{
		left=\@marginwidth, right=\@marginwidth, 
		bottom=\@marginwidth, top=\@marginwidth, 
		marginparwidth=0cm, marginparsep=0cm, includemp
	}
\fi
\RequirePackage{floatrow, placeins}
\RequirePackage{etoolbox, xstring, listofitems}

%% Link settings
\RequirePackage[hyphens]{url, xurl}
\RequirePackage[hidelinks]{hyperref}

%% Colour settings
\RequirePackage{color, xcolor}
\input{color.def}

%% Table settings
\RequirePackage{multicol, multirow, array, tabularx, longtable, makecell, arydshln, algorithm, algpseudocode}
\newcommand{\STAB}[1]{\begin{tabular}{@{}c@{}}#1\end{tabular}}
\newcolumntype{C}{>{\centering\arraybackslash}X}
\setlength{\arrayrulewidth}{1pt}
\BeforeBeginEnvironment{table}{\renewcommand{\arraystretch}{\linestretch}}

%% Figure settings
\RequirePackage{ifthen}
\RequirePackage{graphicx, pdfpages, wrapfig, mdframed}
\RequirePackage{tikz, pgfplots}
\RequirePackage[labelfont={sf,bf}]{caption, subcaption}
\captionsetup{labelsep=quad}
\captionsetup[subfigure]{format=hang}
\RequirePackage{figures}

%% List settings
\RequirePackage[inline]{enumitem}
\setlist{leftmargin=\parindent}
\newlist{enumerateI}{enumerate*}{1}
\setlist[enumerateI]{itemjoin={{, }}, itemjoin*={{, and }}}
\setlist[enumerateI,1]{label=(\arabic*)}
\newlist{enumthm}{enumerate}{1}
\setlist[enumthm]{leftmargin=1\parindent, labelindent=*, itemindent=*, align=left,
	font=\sffamily\color{\accentcolour}}
\newlist{itemizeM}{itemize}{1}
\setlist[itemizeM]{align=left, labelindent=0pt, labelwidth=*, labelsep=0.25\parindent}
% Annotated bibliography
\RequirePackage{scrextend}
\newenvironment{abibliography}{%
	\begin{addmargin}[\@parindent]{0pt}
		\newcommand*{\abitem}[1]{
			\setlength{\parindent}{-\@parindent}
			\par\noindent\indent\relax##1\quad
		}
}{%
  \end{addmargin}
}
\BeforeBeginEnvironment{enumerate}{\setlength{\parindent}{\@parindent}}
\BeforeBeginEnvironment{itemize}{\setlength{\parindent}{\@parindent}}

%% Citation settings
\RequirePackage[tocbib]{apacite}
\bibliographystyle{apacite}
\newcommand{\doi}[1]{\href{https://doi.org/#1}{\texttt{#1}}}

%% Header & footer settings
\RequirePackage{fancyhdr}
\setlength{\headheight}{\textsize}
\addtolength{\headheight}{0.05003pt}
\addtolength{\topmargin}{-0.05003pt}

\let\hl\undefined
\newcommand{\alert}[1]{{\color{\accentcolour}#1}}
\newcommand{\fillsolution}[1]{{\color{\accentcolour}#1}}
\newcommand{\hl}[1]{{\alert{#1}}}
\newcommand{\prob}[1]{{\color{myred}#1}}

% footnote references
\newcommand\footnoteref[1]{\protected@xdef\@thefnmark{\ref{#1}}\@footnotemark}

% Custom appearances
\RequirePackage{typography}
\RequirePackage{mathematics}

%% Math settings
\let\openbox\relax
\RequirePackage{amsmath, amsthm, amsfonts, cancel, mathtools}
%\usepackage{amssymb}

%% Boxed environments
\RequirePackage{environment}


%% Cross-referencing
\input{crossref.def}

%% Language settings
\ifdefstring{\@document@language}{chinese}{
	\input{languague-chinese.def}
}{
	\RequirePackage[english]{babel}
}

% Personal configurations
\input{personal.def}