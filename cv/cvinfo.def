\NeedsTeXFormat{LaTeX2e}
\ProvidesFile{cvinfo.def}[2023/12/12]

\usepackage{etoolbox}

% name
\let\name\undefined
\gdef\@info@name{Name}
\gdef\@info@shortname{Name}
\newcommand{\name}[2][]{
	\gdef\@info@name{#2} 
	\ifx\relax#1\relax
		\gdef\@info@shortname{#2}
	\else
		\gdef\@info@shortname{#1}
	\fi
}
\let\title\name

% update note
\let\updatenote\undefined
\gdef\@info@updatenote@title{Last updated:}
\gdef\@info@updatenote{\@info@updatenote@title \linebreak \today} 
\gdef\@info@updatenote@short{\@info@updatenote@title \today}
\newcommand{\updatenote}[2][]{
	\gdef\@info@updatenote{#2} 
	\ifx\relax#1\relax
        \gdef\@info@updatenote@short{#2}
	\else
		\gdef\@info@updatenote@short{#1}
	\fi
}

% email
\let\mail\undefined
\gdef\@info@mail@title{email}
\newcommand{\mail}[2][]{
	\gdef\@info@mail{#2} 
	\ifx\relax#1\relax\else
		\gdef\@info@mail{#1}
	\fi
}

% website
\let\website\undefined
\gdef\@info@website@title{website}
\newcommand{\website}[2][]{
	\gdef\@info@website{#2} 
	\ifx\relax#1\relax\else
		\gdef\@info@website{#1}
	\fi
}

% phone
\let\phone\undefined
\gdef\@info@phone@title{phone}
\newcommand{\phone}[2][]{
	\gdef\@info@phone{#2} 
	\ifx\relax#1\relax\else
		\gdef\@info@phone{#1}
	\fi
}

% institute
\let\school\undefined
\gdef\@info@institute@title{school}
\newcommand{\school}[2][]{
	\gdef\@info@institute{#2} 
	\ifx\relax#1\relax\else
		\gdef\@info@institute{#1}
	\fi
}
\let\institute\school

% address
\let\address\undefined
\gdef\@info@address@title{address}
\newcommand{\address}[2][]{
	\gdef\@info@address{#2} 
	\ifx\relax#1\relax\else
		\gdef\@info@address{#1}
	\fi
}

% language: Chinese
\ifdefstring{\@document@language}{chinese}{
	\RequirePackage{fontspec, xeCJK}
	\setCJKmainfont{Source Han Serif TC}
    \gdef\@info@updatenote@title{最後更新：}
	\gdef\@info@mail@title{電子郵件}
	\gdef\@info@website@title{個人網站}
	\gdef\@info@phone@title{聯絡電話}
	\gdef\@info@institute@title{學校}
	\gdef\@info@address@title{工作地點}
}{}